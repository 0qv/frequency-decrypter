import functools, operator

#todo: support digraph analysis to improve algorithm confidence
#todo: add confidence score

#issues: confidence of frequency analysis can only be at best a function of the least
# of 

LETTERS = "abcdefghijklmnopqrstuvwxyz"
BANNED = " " #letters not worth analysing

def frequency_analysis(input_text):
    #todo: have f_a modify nextchar based on the size of chunks (to support digraphs)
    def nextchar(analysis, next_char):
        if next_char not in BANNED:
            if next_char not in analysis:
                analysis[next_char] = 1
            else:
                analysis[next_char] += 1
        return analysis
    return functools.reduce(nextchar,[{},*input_text])


#todo: allow rolling one's own freq table with help of the analysis above
def frequency_table():
    return {'e': 61200, 't': 44978, 'a': 40194,
            'o': 37911, 'n': 33700, 'i': 33495,
            's': 31473, 'r': 27511, 'h': 31916,
            'd': 22588, 'l': 20530, 'u': 14627,
            'c': 10644, 'm': 12571, 'f': 9862,
            'y': 11325, 'w': 12741, 'g': 11255,
            'p': 9819, 'b': 8383, 'v': 4553,
            'k': 6342, 'x': 609, 'q': 282,
            'j': 1056, 'z': 435}

def decrypt(ciphertext, freq_table):
    enc_freqs = frequency_analysis(ciphertext)
    enc_freqs_sorted = sorted(enc_freqs.items(), key=operator.itemgetter(1))
    enc_freqs_sorted_list = list(enc_freqs_sorted)
    print(enc_freqs_sorted_list)
    freq_table_sorted = sorted(freq_table.items(), key=operator.itemgetter(1))
    #match up the frequencies to get a correspondence table
    correspondence = dict(zip([i[0] for i in enc_freqs_sorted],
                         [i[0] for i in freq_table_sorted]))
    return "".join([correspondence[letter]
            if letter not in BANNED else letter
            for letter in ciphertext])


    
encry = "vg vf n gehgu havirefnyyl npxabjyrqtrq gung n fvatyr zna va cbffrffvba bs n tbbq sbeghar zhfg or va jnag bs n jvsr ubjrire yvggyr xabja gur srryvatf be ivrjf bs fhpu n zna znl or ba uvf svefg ragrevat n arvtuobheubbq guvf gehgu vf fb jryy svkrq va gur zvaqf bs gur fheebhaqvat snzvyvrf gung ur vf pbafvqrerq nf gur evtugshy cebcregl bs fbzr bar be bgure bs gurve qnhtugref zl qrne ze oraarg fnvq uvf ynql gb uvz bar qnl unir lbh urneq gung arguresvryq cnex vf yrg ng ynfg ze oraarg ercyvrq gung ur unq abg ohg vg vf erghearq fur sbe zef ybat unf whfg orra urer naq fur gbyq zr nyy nobhg vg ze oraarg znqr ab nafjre qb abg lbh jnag gb xabj jub unf gnxra vg pevrq uvf jvsr vzcngvragyl lbh jnag gb gryy zr naq v unir ab bowrpgvba gb urnevat vg guvf jnf vaivgngvba rabhtu jul zl qrne lbh zhfg xabj zef ybat fnlf gung arguresvryq vf gnxra ol n lbhat zna bs ynetr sbeghar sebz gur abegu bs ratynaq gung ur pnzr qbja ba zbaqnl va n punvfr naq sbhe gb frr gur cynpr naq jnf fb zhpu qryvtugrq jvgu vg gung ur nterrq jvgu ze zbeevf vzzrqvngryl gung ur vf gb gnxr cbffrffvba orsber zvpunryznf naq fbzr bs uvf freinagf ner gb or va gur ubhfr ol gur raq bs arkg jrrx jung vf uvf anzr ovatyrl vf ur zneevrq be fvatyr bu fvatyr zl qrne gb or fher n fvatyr zna bs ynetr sbeghar sbhe be svir gubhfnaq n lrne jung n svar guvat sbe bhe tveyf ubj fb ubj pna vg nssrpg gurz zl qrne ze oraarg ercyvrq uvf jvsr ubj pna lbh or fb gverfbzr lbh zhfg xabj gung v nz guvaxvat bs uvf zneelvat bar bs gurz vf gung uvf qrfvta va frggyvat urer qrfvta abafrafr ubj pna lbh gnyx fb ohg vg vf irel yvxryl gung ur znl snyy va ybir jvgu bar bs gurz naq gurersber lbh zhfg ivfvg uvz nf fbba nf ur pbzrf v frr ab bppnfvba sbe gung lbh naq gur tveyf znl tb be lbh znl fraq gurz ol gurzfryirf juvpu creuncf jvyy or fgvyy orggre sbe nf lbh ner nf unaqfbzr nf nal bs gurz ze ovatyrl zvtug yvxr lbh gur orfg bs gur cnegl zl qrne lbh synggre zr v pregnvayl unir unq zl funer bs ornhgl ohg v qb abg cergraq gb or nalguvat rkgenbeqvanel abj jura n jbzna unf svir tebjahc qnhtugref fur bhtug gb tvir bire guvaxvat bs ure bja ornhgl va fhpu pnfrf n jbzna unf abg bsgra zhpu ornhgl gb guvax bs ohg zl qrne lbh zhfg vaqrrq tb naq frr ze ovatyrl jura ur pbzrf vagb gur arvtuobheubbq vg vf zber guna v ratntr sbe v nffher lbh ohg pbafvqre lbhe qnhtugref bayl guvax jung na rfgnoyvfuzrag vg jbhyq or sbe bar bs gurz fve jvyyvnz naq ynql yhpnf ner qrgrezvarq gb tb zreryl ba gung nppbhag sbe va trareny lbh xabj gurl ivfvg ab arjpbzref vaqrrq lbh zhfg tb sbe vg jvyy or vzcbffvoyr sbe hf gb ivfvg uvz vs lbh qb abg lbh ner bire fpehchybhf fheryl v qner fnl ze ovatyrl jvyy or irel tynq gb frr lbh naq v jvyy fraq n srj yvarf ol lbh gb nffher uvz bs zl urnegl pbafrag gb uvf zneelvat juvpurire ur pubbfrf bs gur tveyf gubhtu v zhfg guebj va n tbbq jbeq sbe zl yvggyr yvmml v qrfver lbh jvyy qb ab fhpu guvat yvmml vf abg n ovg orggre guna gur bguref naq v nz fher fur vf abg unys fb unaqfbzr nf wnar abe unys fb tbbquhzbherq nf ylqvn ohg lbh ner nyjnlf tvivat ure gur cersrerapr gurl unir abar bs gurz zhpu gb erpbzzraq gurz ercyvrq ur gurl ner nyy fvyyl naq vtabenag yvxr bgure tveyf ohg yvmml unf fbzrguvat zber bs dhvpxarff guna ure fvfgref ze oraarg ubj pna lbh nohfr lbhe bja puvyqera va fhpu n jnl lbh gnxr qryvtug va irkvat zr lbh unir ab pbzcnffvba ba zl cbbe areirf lbh zvfgnxr zr zl qrne v unir n uvtu erfcrpg sbe lbhe areirf gurl ner zl byq sevraqf v unir urneq lbh zragvba gurz jvgu pbafvqrengvba gurfr gjragl lrnef ng yrnfg nu lbh qb abg xabj jung v fhssre ohg v ubcr lbh jvyy trg bire vg naq yvir gb frr znal lbhat zra bs sbhe gubhfnaq n lrne pbzr vagb gur arvtuobheubbq vg jvyy or ab hfr gb hf vs gjragl fhpu fubhyq pbzr fvapr lbh jvyy abg ivfvg gurz qrcraq hcba vg zl qrne gung jura gurer ner gjragl v jvyy ivfvg gurz nyy ze oraarg jnf fb bqq n zvkgher bs dhvpx cnegf fnepnfgvp uhzbhe erfreir naq pncevpr gung gur rkcrevrapr bs guerrnaqgjragl lrnef unq orra vafhssvpvrag gb znxr uvf jvsr haqrefgnaq uvf punenpgre ure zvaq jnf yrff qvssvphyg gb qrirybc fur jnf n jbzna bs zrna haqrefgnaqvat yvggyr vasbezngvba naq hapregnva grzcre jura fur jnf qvfpbagragrq fur snapvrq urefrys areibhf gur ohfvarff bs ure yvsr jnf gb trg ure qnhtugref zneevrq vgf fbynpr jnf ivfvgvat naq arjf ze oraarg jnf nzbat gur rneyvrfg bs gubfr jub jnvgrq ba ze ovatyrl ur unq nyjnlf vagraqrq gb ivfvg uvz gubhtu gb gur ynfg nyjnlf nffhevat uvf jvsr gung ur fubhyq abg tb naq gvyy gur riravat nsgre gur ivfvg jnf cnvq fur unq ab xabjyrqtr bs vg vg jnf gura qvfpybfrq va gur sbyybjvat znaare bofreivat uvf frpbaq qnhtugre rzcyblrq va gevzzvat n ung ur fhqqrayl nqqerffrq ure jvgu v ubcr ze ovatyrl jvyy yvxr vg yvmml jr ner abg va n jnl gb xabj jung ze ovatyrl yvxrf fnvq ure zbgure erfragshyyl fvapr jr ner abg gb ivfvg ohg lbh sbetrg znzzn fnvq ryvmnorgu gung jr funyy zrrg uvz ng gur nffrzoyvrf naq gung zef ybat unf cebzvfrq gb vagebqhpr uvz v qb abg oryvrir zef ybat jvyy qb nal fhpu guvat fur unf gjb avrprf bs ure bja fur vf n frysvfu ulcbpevgvpny jbzna naq v unir ab bcvavba bs ure ab zber unir v fnvq ze oraarg naq v nz tynq gb svaq gung lbh qb abg qrcraq ba ure freivat lbh zef oraarg qrvtarq abg gb znxr nal ercyl ohg hanoyr gb pbagnva urefrys ortna fpbyqvat bar bs ure qnhtugref qbag xrrc pbhtuvat fb xvggl sbe urniraf fnxr unir n yvggyr pbzcnffvba ba zl areirf lbh grne gurz gb cvrprf xvggl unf ab qvfpergvba va ure pbhtuf fnvq ure sngure fur gvzrf gurz vyy v qb abg pbhtu sbe zl bja nzhfrzrag ercyvrq xvggl sergshyyl jura vf lbhe arkg onyy gb or yvmml gbzbeebj sbegavtug nlr fb vg vf pevrq ure zbgure naq zef ybat qbrf abg pbzr onpx gvyy gur qnl orsber fb vg jvyy or vzcbffvoyr sbe ure gb vagebqhpr uvz sbe fur jvyy abg xabj uvz urefrys gura zl qrne lbh znl unir gur nqinagntr bs lbhe sevraq naq vagebqhpr ze ovatyrl gb ure vzcbffvoyr ze oraarg vzcbffvoyr jura v nz abg npdhnvagrq jvgu uvz zlfrys ubj pna lbh or fb grnfvat v ubabhe lbhe pvephzfcrpgvba n sbegavtugf npdhnvagnapr vf pregnvayl irel yvggyr bar pnaabg xabj jung n zna ernyyl vf ol gur raq bs n sbegavtug ohg vs jr qb abg iragher fbzrobql ryfr jvyy naq nsgre nyy zef ybat naq ure avrprf zhfg fgnaq gurve punapr naq gurersber nf fur jvyy guvax vg na npg bs xvaqarff vs lbh qrpyvar gur bssvpr v jvyy gnxr vg ba zlfrys gur tveyf fgnerq ng gurve sngure zef oraarg fnvq bayl abafrafr abafrafr jung pna or gur zrnavat bs gung rzcungvp rkpynzngvba pevrq ur qb lbh pbafvqre gur sbezf bs vagebqhpgvba naq gur fgerff gung vf ynvq ba gurz nf abafrafr v pnaabg dhvgr nterr jvgu lbh gurer jung fnl lbh znel sbe lbh ner n lbhat ynql bs qrrc ersyrpgvba v xabj naq ernq terng obbxf naq znxr rkgenpgf znel jvfurq gb fnl fbzrguvat irel frafvoyr ohg xarj abg ubj juvyr znel vf nqwhfgvat ure vqrnf ur pbagvahrq yrg hf erghea gb ze ovatyrl v nz fvpx bs ze ovatyrl pevrq uvf jvsr v nz fbeel gb urne gung ohg jul qvq abg lbh gryy zr fb orsber vs v unq xabja nf zhpu guvf zbeavat v pregnvayl jbhyq abg unir pnyyrq ba uvz vg vf irel hayhpxl ohg nf v unir npghnyyl cnvq gur ivfvg jr pnaabg rfpncr gur npdhnvagnapr abj gur nfgbavfuzrag bs gur ynqvrf jnf whfg jung ur jvfurq gung bs zef oraarg creuncf fhecnffvat gur erfg gubhtu jura gur svefg ghzhyg bs wbl jnf bire fur ortna gb qrpyner gung vg jnf jung fur unq rkcrpgrq nyy gur juvyr ubj tbbq vg jnf va lbh zl qrne ze oraarg ohg v xarj v fubhyq crefhnqr lbh ng ynfg v jnf fher lbh ybirq lbhe tveyf gbb jryy gb artyrpg fhpu na npdhnvagnapr jryy ubj cyrnfrq v nz naq vg vf fhpu n tbbq wbxr gbb gung lbh fubhyq unir tbar guvf zbeavat naq arire fnvq n jbeq nobhg vg gvyy abj abj xvggl lbh znl pbhtu nf zhpu nf lbh pubbfr fnvq ze oraarg naq nf ur fcbxr ur yrsg gur ebbz sngvthrq jvgu gur encgherf bs uvf jvsr jung na rkpryyrag sngure lbh unir tveyf fnvq fur jura gur qbbe jnf fuhg v qb abg xabj ubj lbh jvyy rire znxr uvz nzraqf sbe uvf xvaqarff be zr rvgure sbe gung znggre ng bhe gvzr bs yvsr vg vf abg fb cyrnfnag v pna gryy lbh gb or znxvat arj npdhnvagnapr rirel qnl ohg sbe lbhe fnxrf jr jbhyq qb nalguvat ylqvn zl ybir gubhtu lbh ner gur lbhatrfg v qner fnl ze ovatyrl jvyy qnapr jvgu lbh ng gur arkg onyy bu fnvq ylqvn fgbhgyl v nz abg nsenvq sbe gubhtu v nz gur lbhatrfg vz gur gnyyrfg gur erfg bs gur riravat jnf fcrag va pbawrpghevat ubj fbba ur jbhyq erghea ze oraargf ivfvg naq qrgrezvavat jura gurl fubhyq nfx uvz gb qvaare abg nyy gung zef oraarg ubjrire jvgu gur nffvfgnapr bs ure svir qnhtugref pbhyq nfx ba gur fhowrpg jnf fhssvpvrag gb qenj sebz ure uhfonaq nal fngvfsnpgbel qrfpevcgvba bs ze ovatyrl gurl nggnpxrq uvz va inevbhf jnlf jvgu onersnprq dhrfgvbaf vatravbhf fhccbfvgvbaf naq qvfgnag fhezvfrf ohg ur ryhqrq gur fxvyy bs gurz nyy naq gurl jrer ng ynfg boyvtrq gb npprcg gur frpbaqunaq vagryyvtrapr bs gurve arvtuobhe ynql yhpnf ure ercbeg jnf uvtuyl snibhenoyr fve jvyyvnz unq orra qryvtugrq jvgu uvz ur jnf dhvgr lbhat jbaqreshyyl unaqfbzr rkgerzryl nterrnoyr naq gb pebja gur jubyr ur zrnag gb or ng gur arkg nffrzoyl jvgu n ynetr cnegl abguvat pbhyq or zber qryvtugshy gb or sbaq bs qnapvat jnf n pregnva fgrc gbjneqf snyyvat va ybir naq irel yviryl ubcrf bs ze ovatyrlf urneg jrer ragregnvarq vs v pna ohg frr bar bs zl qnhtugref unccvyl frggyrq ng arguresvryq fnvq zef oraarg gb ure uhfonaq naq nyy gur bguref rdhnyyl jryy zneevrq v funyy unir abguvat gb jvfu sbe va n srj qnlf ze ovatyrl erghearq ze oraargf ivfvg naq fng nobhg gra zvahgrf jvgu uvz va uvf yvoenel ur unq ragregnvarq ubcrf bs orvat nqzvggrq gb n fvtug bs gur lbhat ynqvrf bs jubfr ornhgl ur unq urneq zhpu ohg ur fnj bayl gur sngure gur ynqvrf jrer fbzrjung zber sbeghangr sbe gurl unq gur nqinagntr bs nfpregnvavat sebz na hccre jvaqbj gung ur jber n oyhr pbng naq ebqr n oynpx ubefr na vaivgngvba gb qvaare jnf fbba nsgrejneqf qvfcngpurq naq nyernql unq zef oraarg cynaarq gur pbhefrf gung jrer gb qb perqvg gb ure ubhfrxrrcvat jura na nafjre neevirq juvpu qrsreerq vg nyy ze ovatyrl jnf boyvtrq gb or va gbja gur sbyybjvat qnl naq pbafrdhragyl hanoyr gb npprcg gur ubabhe bs gurve vaivgngvba rgp zef oraarg jnf dhvgr qvfpbapregrq fur pbhyq abg vzntvar jung ohfvarff ur pbhyq unir va gbja fb fbba nsgre uvf neeviny va uregsbeqfuver naq fur ortna gb srne gung ur zvtug or nyjnlf sylvat nobhg sebz bar cynpr gb nabgure naq arire frggyrq ng arguresvryq nf ur bhtug gb or ynql yhpnf dhvrgrq ure srnef n yvggyr ol fgnegvat gur vqrn bs uvf orvat tbar gb ybaqba bayl gb trg n ynetr cnegl sbe gur onyy naq n ercbeg fbba sbyybjrq gung ze ovatyrl jnf gb oevat gjryir ynqvrf naq frira tragyrzra jvgu uvz gb gur nffrzoyl gur tveyf tevrirq bire fhpu n ahzore bs ynqvrf ohg jrer pbzsbegrq gur qnl orsber gur onyy ol urnevat gung vafgrnq bs gjryir ur unq oebhtug bayl fvk jvgu uvz sebz ybaqba uvf svir fvfgref naq n pbhfva naq jura gur cnegl ragrerq gur nffrzoyl ebbz vg pbafvfgrq bs bayl svir nygbtrgure ze ovatyrl uvf gjb fvfgref gur uhfonaq bs gur ryqrfg naq nabgure lbhat zna ze ovatyrl jnf tbbqybbxvat naq tragyrznayvxr ur unq n cyrnfnag pbhagranapr naq rnfl hanssrpgrq znaaref uvf fvfgref jrer svar jbzra jvgu na nve bs qrpvqrq snfuvba uvf oebgurevaynj ze uhefg zreryl ybbxrq gur tragyrzna ohg uvf sevraq ze qnepl fbba qerj gur nggragvba bs gur ebbz ol uvf svar gnyy crefba unaqfbzr srngherf aboyr zvra naq gur ercbeg juvpu jnf va trareny pvephyngvba jvguva svir zvahgrf nsgre uvf ragenapr bs uvf univat gra gubhfnaq n lrne gur tragyrzra cebabhaprq uvz gb or n svar svther bs n zna gur ynqvrf qrpynerq ur jnf zhpu unaqfbzre guna ze ovatyrl naq ur jnf ybbxrq ng jvgu terng nqzvengvba sbe nobhg unys gur riravat gvyy uvf znaaref tnir n qvfthfg juvpu ghearq gur gvqr bs uvf cbchynevgl sbe ur jnf qvfpbirerq gb or cebhq gb or nobir uvf pbzcnal naq nobir orvat cyrnfrq naq abg nyy uvf ynetr rfgngr va qreolfuver pbhyq gura fnir uvz sebz univat n zbfg sbeovqqvat qvfnterrnoyr pbhagranapr naq orvat hajbegul gb or pbzcnerq jvgu uvf sevraq ze ovatyrl unq fbba znqr uvzfrys npdhnvagrq jvgu nyy gur cevapvcny crbcyr va gur ebbz ur jnf yviryl naq haerfreirq qnaprq rirel qnapr jnf natel gung gur onyy pybfrq fb rneyl naq gnyxrq bs tvivat bar uvzfrys ng arguresvryq fhpu nzvnoyr dhnyvgvrf zhfg fcrnx sbe gurzfryirf jung n pbagenfg orgjrra uvz naq uvf sevraq ze qnepl qnaprq bayl bapr jvgu zef uhefg naq bapr jvgu zvff ovatyrl qrpyvarq orvat vagebqhprq gb nal bgure ynql naq fcrag gur erfg bs gur riravat va jnyxvat nobhg gur ebbz fcrnxvat bppnfvbanyyl gb bar bs uvf bja cnegl uvf punenpgre jnf qrpvqrq ur jnf gur cebhqrfg zbfg qvfnterrnoyr zna va gur jbeyq naq rirelobql ubcrq gung ur jbhyq arire pbzr gurer ntnva nzbatfg gur zbfg ivbyrag ntnvafg uvz jnf zef oraarg jubfr qvfyvxr bs uvf trareny orunivbhe jnf funecrarq vagb cnegvphyne erfragzrag ol uvf univat fyvtugrq bar bs ure qnhtugref ryvmnorgu oraarg unq orra boyvtrq ol gur fpnepvgl bs tragyrzra gb fvg qbja sbe gjb qnaprf naq qhevat cneg bs gung gvzr ze qnepl unq orra fgnaqvat arne rabhtu sbe ure gb bireurne n pbairefngvba orgjrra uvz naq ze ovatyrl jub pnzr sebz gur qnapr sbe n srj zvahgrf gb cerff uvf sevraq gb wbva vg pbzr qnepl fnvq ur v zhfg unir lbh qnapr v ungr gb frr lbh fgnaqvat nobhg ol lbhefrys va guvf fghcvq znaare lbh unq zhpu orggre qnapr v pregnvayl funyy abg lbh xabj ubj v qrgrfg vg hayrff v nz cnegvphyneyl npdhnvagrq jvgu zl cnegare ng fhpu na nffrzoyl nf guvf vg jbhyq or vafhccbegnoyr lbhe fvfgref ner ratntrq naq gurer vf abg nabgure jbzna va gur ebbz jubz vg jbhyq abg or n chavfuzrag gb zr gb fgnaq hc jvgu v jbhyq abg or fb snfgvqvbhf nf lbh ner pevrq ovatyrl sbe n xvatqbz hcba zl ubabhe v arire zrg jvgu fb znal cyrnfnag tveyf va zl yvsr nf v unir guvf riravat naq gurer ner frireny bs gurz lbh frr hapbzzbayl cerggl lbh ner qnapvat jvgu gur bayl unaqfbzr tvey va gur ebbz fnvq ze qnepl ybbxvat ng gur ryqrfg zvff oraarg bu fur vf gur zbfg ornhgvshy perngher v rire oruryq ohg gurer vf bar bs ure fvfgref fvggvat qbja whfg oruvaq lbh jub vf irel cerggl naq v qner fnl irel nterrnoyr qb yrg zr nfx zl cnegare gb vagebqhpr lbh juvpu qb lbh zrna naq gheavat ebhaq ur ybbxrq sbe n zbzrag ng ryvmnorgu gvyy pngpuvat ure rlr ur jvguqerj uvf bja naq pbyqyl fnvq fur vf gbyrenoyr ohg abg unaqfbzr rabhtu gb grzcg zr naq v nz va ab uhzbhe ng cerfrag gb tvir pbafrdhrapr gb lbhat ynqvrf jub ner fyvtugrq ol bgure zra lbh unq orggre erghea gb lbhe cnegare naq rawbl ure fzvyrf sbe lbh ner jnfgvat lbhe gvzr jvgu zr ze ovatyrl sbyybjrq uvf nqivpr ze qnepl jnyxrq bss naq ryvmnorgu erznvarq jvgu ab irel pbeqvny srryvatf gbjneqf uvz fur gbyq gur fgbel ubjrire jvgu terng fcvevg nzbat ure sevraqf sbe fur unq n yviryl cynlshy qvfcbfvgvba juvpu qryvtugrq va nalguvat evqvphybhf gur riravat nygbtrgure cnffrq bss cyrnfnagyl gb gur jubyr snzvyl zef oraarg unq frra ure ryqrfg qnhtugre zhpu nqzverq ol gur arguresvryq cnegl ze ovatyrl unq qnaprq jvgu ure gjvpr naq fur unq orra qvfgvathvfurq ol uvf fvfgref wnar jnf nf zhpu tengvsvrq ol guvf nf ure zbgure pbhyq or gubhtu va n dhvrgre jnl ryvmnorgu sryg wnarf cyrnfher znel unq urneq urefrys zragvbarq gb zvff ovatyrl nf gur zbfg nppbzcyvfurq tvey va gur arvtuobheubbq naq pngurevar naq ylqvn unq orra sbeghangr rabhtu gb or arire jvgubhg cnegaref juvpu jnf nyy gung gurl unq lrg yrneag gb pner sbe ng n onyy gurl erghearq gurersber va tbbq fcvevgf gb ybatobhea gur ivyyntr jurer gurl yvirq naq bs juvpu gurl jrer gur cevapvcny vaunovgnagf gurl sbhaq ze oraarg fgvyy hc jvgu n obbx ur jnf ertneqyrff bs gvzr naq ba gur cerfrag bppnfvba ur unq n tbbq qrny bs phevbfvgl nf gb gur rirag bs na riravat juvpu unq envfrq fhpu fcyraqvq rkcrpgngvbaf ur unq engure ubcrq gung nyy uvf jvsrf ivrjf ba gur fgenatre jbhyq or qvfnccbvagrq ohg ur fbba sbhaq gung ur unq n irel qvssrerag fgbel gb urne bu zl qrne ze oraarg nf fur ragrerq gur ebbz jr unir unq n zbfg qryvtugshy riravat n zbfg rkpryyrag onyy v jvfu lbh unq orra gurer wnar jnf fb nqzverq abguvat pbhyq or yvxr vg rirelobql fnvq ubj jryy fur ybbxrq naq ze ovatyrl gubhtug ure dhvgr ornhgvshy naq qnaprq jvgu ure gjvpr bayl guvax bs gung zl qrne ur npghnyyl qnaprq jvgu ure gjvpr naq fur jnf gur bayl perngher va gur ebbz gung ur nfxrq n frpbaq gvzr svefg bs nyy ur nfxrq zvff yhpnf v jnf fb irkrq gb frr uvz fgnaq hc jvgu ure ohg ubjrire ur qvq abg nqzver ure ng nyy vaqrrq abobql pna lbh xabj naq ur frrzrq dhvgr fgehpx jvgu wnar nf fur jnf tbvat qbja gur qnapr fb ur radhverq jub fur jnf naq tbg vagebqhprq naq nfxrq ure sbe gur gjb arkg gura gur gjb guveq ur qnaprq jvgu zvff xvat naq gur gjb sbhegu jvgu znevn yhpnf naq gur gjb svsgu jvgu wnar ntnva naq gur gjb fvkgu jvgu yvmml naq gur obhynatre vs ur unq unq nal pbzcnffvba sbe zr pevrq ure uhfonaq vzcngvragyl ur jbhyq abg unir qnaprq unys fb zhpu sbe tbqf fnxr fnl ab zber bs uvf cnegaref bu gung ur unq fcenvarq uvf naxyr va gur svefg qnapr bu zl qrne pbagvahrq zef oraarg v nz dhvgr qryvtugrq jvgu uvz ur vf fb rkprffviryl unaqfbzr naq uvf fvfgref ner punezvat jbzra v arire va zl yvsr fnj nalguvat zber ryrtnag guna gurve qerffrf v qner fnl gur ynpr hcba zef uhefgf tbja urer fur jnf vagreehcgrq ntnva ze oraarg cebgrfgrq ntnvafg nal qrfpevcgvba bs svarel fur jnf gurersber boyvtrq gb frrx nabgure oenapu bs gur fhowrpg naq eryngrq jvgu zhpu ovggrearff bs fcvevg naq fbzr rknttrengvba gur fubpxvat ehqrarff bs ze qnepl ohg v pna nffher lbh fur nqqrq gung yvmml qbrf abg ybfr zhpu ol abg fhvgvat uvf snapl sbe ur vf n zbfg qvfnterrnoyr ubeevq zna abg ng nyy jbegu cyrnfvat fb uvtu naq fb pbaprvgrq gung gurer jnf ab raqhevat uvz ur jnyxrq urer naq ur jnyxrq gurer snaplvat uvzfrys fb irel terng abg unaqfbzr rabhtu gb qnapr jvgu v jvfu lbh unq orra gurer zl qrne gb unir tvira uvz bar bs lbhe frgqbjaf v dhvgr qrgrfg gur zna jura wnar naq ryvmnorgu jrer nybar gur sbezre jub unq orra pnhgvbhf va ure cenvfr bs ze ovatyrl orsber rkcerffrq gb ure fvfgre ubj irel zhpu fur nqzverq uvz ur vf whfg jung n lbhat zna bhtug gb or fnvq fur frafvoyr tbbquhzbherq yviryl naq v arire fnj fhpu unccl znaareffb zhpu rnfr jvgu fhpu cresrpg tbbq oerrqvat ur vf nyfb unaqfbzr ercyvrq ryvmnorgu juvpu n lbhat zna bhtug yvxrjvfr gb or vs ur cbffvoyl pna uvf punenpgre vf gurerol pbzcyrgr v jnf irel zhpu synggrerq ol uvf nfxvat zr gb qnapr n frpbaq gvzr v qvq abg rkcrpg fhpu n pbzcyvzrag qvq abg lbh v qvq sbe lbh ohg gung vf bar terng qvssrerapr orgjrra hf pbzcyvzragf nyjnlf gnxr lbh ol fhecevfr naq zr arire jung pbhyq or zber angheny guna uvf nfxvat lbh ntnva ur pbhyq abg uryc frrvat gung lbh jrer nobhg svir gvzrf nf cerggl nf rirel bgure jbzna va gur ebbz ab gunaxf gb uvf tnyynagel sbe gung jryy ur pregnvayl vf irel nterrnoyr naq v tvir lbh yrnir gb yvxr uvz lbh unir yvxrq znal n fghcvqre crefba qrne yvmml bu lbh ner n terng qrny gbb ncg lbh xabj gb yvxr crbcyr va trareny lbh arire frr n snhyg va nalobql nyy gur jbeyq ner tbbq naq nterrnoyr va lbhe rlrf v arire urneq lbh fcrnx vyy bs n uhzna orvat va zl yvsr v jbhyq jvfu abg gb or unfgl va prafhevat nal bar ohg v nyjnlf fcrnx jung v guvax v xabj lbh qb naq vg vf gung juvpu znxrf gur jbaqre jvgu lbhe tbbq frafr gb or fb ubarfgyl oyvaq gb gur sbyyvrf naq abafrafr bs bguref nssrpgngvba bs pnaqbhe vf pbzzba rabhtubar zrrgf jvgu vg rireljurer ohg gb or pnaqvq jvgubhg bfgragngvba be qrfvtagb gnxr gur tbbq bs rirelobqlf punenpgre naq znxr vg fgvyy orggre naq fnl abguvat bs gur onqorybatf gb lbh nybar naq fb lbh yvxr guvf znaf fvfgref gbb qb lbh gurve znaaref ner abg rdhny gb uvf pregnvayl abg ng svefg ohg gurl ner irel cyrnfvat jbzra jura lbh pbairefr jvgu gurz zvff ovatyrl vf gb yvir jvgu ure oebgure naq xrrc uvf ubhfr naq v nz zhpu zvfgnxra vs jr funyy abg svaq n irel punezvat arvtuobhe va ure ryvmnorgu yvfgrarq va fvyrapr ohg jnf abg pbaivaprq gurve orunivbhe ng gur nffrzoyl unq abg orra pnyphyngrq gb cyrnfr va trareny naq jvgu zber dhvpxarff bs bofreingvba naq yrff cyvnapl bs grzcre guna ure fvfgre naq jvgu n whqtzrag gbb hanffnvyrq ol nal nggragvba gb urefrys fur jnf irel yvggyr qvfcbfrq gb nccebir gurz gurl jrer va snpg irel svar ynqvrf abg qrsvpvrag va tbbq uhzbhe jura gurl jrer cyrnfrq abe va gur cbjre bs orvat nterrnoyr jurer gurl pubfr vg ohg cebhq naq pbaprvgrq gurl jrer engure unaqfbzr unq orra rqhpngrq va bar bs gur svefg cevingr frzvanevrf va gbja unq n sbeghar bs gjragl gubhfnaq cbhaqf jrer va gur unovg bs fcraqvat zber guna gurl bhtug naq bs nffbpvngvat jvgu crbcyr bs enax naq jrer gurersber va rirel erfcrpg ragvgyrq gb guvax jryy bs gurzfryirf naq zrnayl bs bguref gurl jrer bs n erfcrpgnoyr snzvyl va gur abegu bs ratynaq n pvephzfgnapr zber qrrcyl vzcerffrq ba gurve zrzbevrf guna gung gurve oebguref sbeghar naq gurve bja unq orra npdhverq ol genqr ze ovatyrl vaurevgrq cebcregl gb gur nzbhag bs arneyl n uhaqerq gubhfnaq cbhaqf sebz uvf sngure jub unq vagraqrq gb chepunfr na rfgngr ohg qvq abg yvir gb qb vg ze ovatyrl vagraqrq vg yvxrjvfr naq fbzrgvzrf znqr pubvpr bs uvf pbhagl ohg nf ur jnf abj cebivqrq jvgu n tbbq ubhfr naq gur yvoregl bs n znabe vg jnf qbhogshy gb znal bs gubfr jub orfg xarj gur rnfvarff bs uvf grzcre jurgure ur zvtug abg fcraq gur erznvaqre bs uvf qnlf ng arguresvryq naq yrnir gur arkg trarengvba gb chepunfr uvf fvfgref jrer irel nakvbhf sbe uvf univat na rfgngr bs uvf bja ohg gubhtu ur jnf abj rfgnoyvfurq bayl nf n granag zvff ovatyrl jnf ol ab zrnaf hajvyyvat gb cerfvqr ng uvf gnoyr abe jnf zef uhefg jub unq zneevrq n zna bs zber snfuvba guna sbeghar yrff qvfcbfrq gb pbafvqre uvf ubhfr nf ure ubzr jura vg fhvgrq ure ze ovatyrl unq abg orra bs ntr gjb lrnef jura ur jnf grzcgrq ol na nppvqragny erpbzzraqngvba gb ybbx ng arguresvryq ubhfr ur qvq ybbx ng vg naq vagb vg sbe unys na ubhe jnf cyrnfrq jvgu gur fvghngvba naq gur cevapvcny ebbzf fngvfsvrq jvgu jung gur bjare fnvq va vgf cenvfr naq gbbx vg vzzrqvngryl orgjrra uvz naq qnepl gurer jnf n irel fgrnql sevraqfuvc va fcvgr bs terng bccbfvgvba bs punenpgre ovatyrl jnf raqrnerq gb qnepl ol gur rnfvarff bcraarff naq qhpgvyvgl bs uvf grzcre gubhtu ab qvfcbfvgvba pbhyq bssre n terngre pbagenfg gb uvf bja naq gubhtu jvgu uvf bja ur arire nccrnerq qvffngvfsvrq ba gur fgeratgu bs qneplf ertneq ovatyrl unq gur svezrfg eryvnapr naq bs uvf whqtzrag gur uvturfg bcvavba va haqrefgnaqvat qnepl jnf gur fhcrevbe ovatyrl jnf ol ab zrnaf qrsvpvrag ohg qnepl jnf pyrire ur jnf ng gur fnzr gvzr unhtugl erfreirq naq snfgvqvbhf naq uvf znaaref gubhtu jryy oerq jrer abg vaivgvat va gung erfcrpg uvf sevraq unq terngyl gur nqinagntr ovatyrl jnf fher bs orvat yvxrq jurerire ur nccrnerq qnepl jnf pbagvahnyyl tvivat bssrapr gur znaare va juvpu gurl fcbxr bs gur zrelgba nffrzoyl jnf fhssvpvragyl punenpgrevfgvp ovatyrl unq arire zrg jvgu cyrnfnagre crbcyr be cerggvre tveyf va uvf yvsr rirelobql unq orra zbfg xvaq naq nggragvir gb uvz gurer unq orra ab sbeznyvgl ab fgvssarff ur unq fbba sryg npdhnvagrq jvgu nyy gur ebbz naq nf gb zvff oraarg ur pbhyq abg pbaprvir na natry zber ornhgvshy qnepl ba gur pbagenel unq frra n pbyyrpgvba bs crbcyr va jubz gurer jnf yvggyr ornhgl naq ab snfuvba sbe abar bs jubz ur unq sryg gur fznyyrfg vagrerfg naq sebz abar erprvirq rvgure nggragvba be cyrnfher zvff oraarg ur npxabjyrqtrq gb or cerggl ohg fur fzvyrq gbb zhpu zef uhefg naq ure fvfgre nyybjrq vg gb or fbohg fgvyy gurl nqzverq ure naq yvxrq ure naq cebabhaprq ure gb or n fjrrg tvey naq bar jubz gurl fubhyq abg bowrpg gb xabj zber bs zvff oraarg jnf gurersber rfgnoyvfurq nf n fjrrg tvey naq gurve oebgure sryg nhgubevfrq ol fhpu pbzzraqngvba gb guvax bs ure nf ur pubfr"



print(decrypt(encry, frequency_table()))

#print(frequency_analysis())

